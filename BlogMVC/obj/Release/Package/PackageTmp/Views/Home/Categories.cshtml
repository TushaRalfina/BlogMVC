@model BlogMVC.Models.ViewModels.CategoryViewModel

@{
    ViewBag.Title = "Categorie";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<!-- # site-content
================================================== -->
<section id="content" class="s-content-categorie">


     <div class="s-pageheader">
        <div class="row">
            <div class="column large-12">
                <h2 class="page-title">
                    <span class="">@Model.category.name</span>
                </h2>
            </div>
        </div>
    </div> 
     <div class="row">
        <div class="column large-12">
            <div class="categories" style="display:flex;align-items:center;justify-content:center; gap:20px">
                <div class="row">
                    <div class="column large-12">
                        <div class="categories" style="display: flex; align-items: center; justify-content: center;  position:relative;right:300px; font-weight:bold">
                            <div style="position: relative;">
                               
                            </div>
                            @if (Model.category.parent_id == null)
                            {
                                <div style="position: relative; padding: 20px;">
                                    <span class="breadcrumb-item">
                                        <a href="@Url.Action("Index", "Home")">
                                            HOME
                                        </a>
                                    </span>
                                    <span class="breadcrumb-item">
                                        <a href="@Url.Action("Categories", "Home", new { category_id = Model.category.id })">
                                            /@Model.category.name/
                                        </a>
                                    </span>
                                </div>
                            }
                            else
                            {
                                var parentCategory = Model.categories.FirstOrDefault(c => c.id == Model.category.parent_id);


                                if (parentCategory != null)
                                {
                        <div style="position: relative;">
                            <span class="breadcrumb-item">
                                <a href="@Url.Action("Index", "Home")">
                                    HOME
                                </a>
                            </span>
                            <span class="breadcrumb-item">
                                <a href="@Url.Action("Categories", "Home", new { category_id = parentCategory.id })">
                                    /@parentCategory.name/
                                </a>
                            </span>
                        </div>
                                }

                                <div style="position: relative;">
                                    <span class="breadcrumb-item">
                                        <a href="@Url.Action("Categories", "Home", new { category_id = Model.category.id })">
                                             @Model.category.name 
                                        </a>
                                    </span>
                                </div>
                            }
                        </div>
                    </div>
                </div>

                <div style="position: relative; left: 300px; padding: 20px; gap:10px">
                    <h7 class="page-title">Subcategories of @Model.category.name : </h7>

                    @if (Model.subcategories.Any()) 
                        {
                            foreach (var subcategory in Model.subcategories.Where(sub => sub.parent_id == Model.category.id))
                            {
                                <h7 class="page-title" style="margin-right:15px;">
                                    <span class="page-title__small-type" style="font-weight:bold">
                                        <a href="@Url.Action("Categories", "Home", new { category_id = subcategory.id })"> @subcategory.name</a>
                                    </span>
                                </h7>
                            }
                        }
                    else
                        {
                            <h7 class="page-title">
                                <span class="page-title__small-type" style="font-weight:bold;color:darkred">
                                    <a href="">None</a>
                                </span>
                            </h7>
                        }
                                 
                                      
                 </div>
             </div>
         </div>
      </div>
 


    <!--  masonry -->
    <div id="bricks" class="bricks">

        <div class="masonry">
            <div class="bricks-wrapper" data-animate-block>
                <div class="grid-sizer"></div>

            @if (Model.posts.Count == 0)
            {
                <h1>No posts created for this category</h1>
            }
            else
            {

                foreach (var post in Model.posts)
                {
                     <article class="brick entry" data-animate-el>
                        <div class="entry__thumb">
                             
                                <a href="@Url.Action("Post", "BlogPost", new { id = post.id })" class="thumb-link">
                                    <img src="data:image/png;base64,@post.main_image" alt="">
                                </a>
                           
                        </div>
                        <div class="entry__text">
                            <div class="entry__header">
                                <div class="entry__meta">
                                    
                                     
                                </div>
                                <h1 class="entry__title"><a href="@Url.Action("Post", "BlogPost", new { id = post.id })">@post.title</a></h1>
                            </div>
                            <div class="entry__excerpt">
                                <p></p>
                            </div>
                            <a class="entry__more-link" href="@Url.Action("Post", "BlogPost", new { id = post.id })">Read More</a>
                        </div>
                    </article>
                }
            }
            </div> <!-- end bricks-wrapper -->
        </div> <!-- end masonry-->

    </div> <!-- end bricks -->

</section> <!-- end s-content -->
